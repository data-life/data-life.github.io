<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" The Split Brain Problem &middot;  Something Pithy about Data" />
  	<meta property="og:site_name" content="Something Pithy about Data" />
  	<meta property="og:url" content="https://data-life.github.io/post/elasticsearch/splitbrain/" />
    
    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2016-10-04T12:03:44Z" />

    
    <meta property="og:article:tag" content="Elasticsearch" />
    
    <meta property="og:article:tag" content="Split Brain" />
    
    <meta property="og:article:tag" content="Nodes" />
    
    <meta property="og:article:tag" content="Architecture" />
    
    <meta property="og:article:tag" content="Troubleshooting" />
    
    

  <title>
     The Split Brain Problem &middot;  Something Pithy about Data
  </title>

    <meta name="description" content="Experiences using AWS Big Data services" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://data-life.github.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://data-life.github.io/images/apple-touch-icon.png" />
    
    <link rel="stylesheet" type="text/css" href="https://data-life.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="https://data-life.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Something Pithy about Data" />
      
      
    
    <meta name="generator" content="Hugo 0.56.3" />

    <link rel="canonical" href="https://data-life.github.io/post/elasticsearch/splitbrain/" />

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-82435011-1', 'auto');
      ga('send', 'pageview');

    </script>
    
<div id="particles-js"></div>
<script src="http://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script src="https://data-life.github.io/js/particles.js"></script>   
</head>
<body class="nav-closed">

  


 <div class="site-wrapper">




<header class="main-header " style="background-image: url(https://data-life.github.io/)">
    
    <nav class="main-nav overlay clearfix">
        
        
    </nav>
<div class="vertical">
        <div class="main-header-content inner">
            <h1 class="page-title">
              <a class="btn-bootstrap-2" href="#content">Something Pithy about Data</a>
          </h1>
          <h2 class="page-description">Experiences using AWS Big Data services</h2>
        </div>
</div>
    <a class="scroll-down icon-arrow-left" href="#content"><span class="hidden">Scroll Down</span></a>
</header>

  <main id="content" class="content" role="main">


  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">The Split Brain Problem</h1>
        <section class="post-meta">
        
          <time class="post-date" datetime="2016-10-04T12:03:44Z">
            Oct 4, 2016
          </time>
        
         
          <span class="post-tag small"><a href="https://data-life.github.io/tags/elasticsearch/">#Elasticsearch</a></span>
         
          <span class="post-tag small"><a href="https://data-life.github.io/tags/split-brain/">#Split Brain</a></span>
         
          <span class="post-tag small"><a href="https://data-life.github.io/tags/nodes/">#Nodes</a></span>
         
          <span class="post-tag small"><a href="https://data-life.github.io/tags/architecture/">#Architecture</a></span>
         
          <span class="post-tag small"><a href="https://data-life.github.io/tags/troubleshooting/">#Troubleshooting</a></span>
         
        </section>
    </header>
  
    <section class="post-content">
      

<h2 id="the-problem">The Problem</h2>

<p>Consider a two node cluster that contains one index with a replication factor of one. This means that each shard of data in the index resides on one node and is replicated to the other node. One of these nodes is elected the master of the cluster to handle administrative tasks and it holds the primary shard for the index. What happens when there is a break in communication between the two nodes for whatever reason? Both nodes will think that the other node has gone off line. In the case of the original master, it will carry on life as normal, trying to assign replica shards as soon as another node comes on line. In the case of the other node, it will now promote itself to be a master and promote its replica shards to be primary shards. Any requests that come in at this point will result in the shards diverging from each other. Once communication is restored or you decide to manually intervene, you now have two masters that both potentially have some of the most up to date information. This makes the resulting data set very difficult to deal with, if it&rsquo;s at all possible, without ingesting the data again.</p>

<h2 id="the-solution">The Solution</h2>

<p>The easiest solution is to have an odd number of nodes in your cluster. This ensures that if there is a break in communication between two groups of nodes (No matter the distribution of numbers), you will always have a quorum for who the true master is. While this method goes a long way towards ensuring the resilience</p>

    </section>


  <footer class="post-footer">


    

    





<section class="author">
  <h4><a href="https://data-life.github.io/">markdawe</a></h4>
  
  <p>my bio</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">South Africa</span>
    <span class="author-link icon-link"><a href="https://data-life.github.io/">https://data-life.github.io/</a></span>
  </div>
</section>



    
    <section class="share">
      <h4>Share this post</h4>
      <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=The%20Split%20Brain%20Problem&amp;url=https%3a%2f%2fdata-life.github.io%2fpost%2felasticsearch%2fsplitbrain%2f"
          onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <span class="hidden">Twitter</span>
      </a>
      <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fdata-life.github.io%2fpost%2felasticsearch%2fsplitbrain%2f"
          onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <span class="hidden">Facebook</span>
      </a>
      <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fdata-life.github.io%2fpost%2felasticsearch%2fsplitbrain%2f"
         onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
          <span class="hidden">Google+</span>
      </a>
    </section>
    

    
    
    

  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Something Pithy about Data</a> All rights reserved - 2016</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://data-life.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="https://data-life.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://data-life.github.io/js/index.js"></script>

</body>
</html>

